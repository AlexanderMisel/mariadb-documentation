# optimizer_switch

[optimizer_switch](/kb/en/server-system-variables/#optimizer_switch) is a server variable that one can use to enable/disable specific optimizations.

### Syntax

To set or unset the various optimizations, use the following syntax:

```sql
SET [GLOBAL|SESSION] optimizer_switch='cmd[,cmd]...';
```

The <em>cmd</em> takes the following format:

<table><tbody><tr><th>Syntax</th><th>Description</th></tr>
<tr><td>default</td><td>Reset all optimizations to their default values.</td></tr>
<tr><td>optimization_name=default</td><td>Set the specified optimization to its default value.</td></tr>
<tr><td>optimization_name=on</td><td>Enable the specified optimization.</td></tr>
<tr><td>optimization_name=off</td><td>Disable the specified optimization.</td></tr>
</tbody></table>

There is no need to list all flags - only those that are specified in the command will be affected.

### Available Flags

Below is a list of all <em>optimizer_switch</em> flags available in MariaDB:

<table><tbody><tr><th>Flag and MariaDB default</th><th>Supported in MariaDB since</th><th>Supported in MySQL since</th></tr>
<tr><td>condition_pushdown_for_derived=on</td><td><a href="/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a></td><td>-</td></tr>
<tr><td>condition_pushdown_from_having=on</td><td><a href="/kb/en/mariadb-1043-release-notes/">MariaDB 10.4.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/condition-pushdown-into-in-subqueries/">condition_pushdown_for_subquery=on</a></td><td><a href="/kb/en/mariadb-1040-release-notes/">MariaDB 10.4.0</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/derived-table-merge-optimization/">derived_merge=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>MySQL 5.7</td></tr>
<tr><td><a href="/kb/en/derived-table-with-key-optimization/">derived_with_keys</a>=on</td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td>default</td><td><a href="/kb/en/what-is-mariadb-51/">MariaDB 5.1</a></td><td>MySQL 5.1</td></tr>
<tr><td>engine_condition_pushdown=off</td><td><a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a> (deprecated in 10.1)</td><td>MySQL 5.5</td></tr>
<tr><td><a href="/kb/en/exists-to-in-optimization/">exists_to_in=on</a></td><td><a href="/kb/en/what-is-mariadb-100/">MariaDB 10.0</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/extended-keys/">extended_keys=on</a></td><td><a href="/kb/en/mariadb-5521-release-notes/">MariaDB 5.5.21</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/firstmatch-strategy/">firstmatch=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>MySQL 5.6</td></tr>
<tr><td><a href="/kb/en/index-condition-pushdown/">index_condition_pushdown=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>MySQL 5.6</td></tr>
<tr><td>index_merge=on</td><td><a href="/kb/en/what-is-mariadb-51/">MariaDB 5.1</a></td><td>MySQL 5.1</td></tr>
<tr><td>index_merge_intersection=on</td><td><a href="/kb/en/what-is-mariadb-51/">MariaDB 5.1</a></td><td>MySQL 5.1</td></tr>
<tr><td><a href="/kb/en/index_merge_sort_intersection/">index_merge_sort_intersection=off</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td>index_merge_sort_union=on</td><td><a href="/kb/en/what-is-mariadb-51/">MariaDB 5.1</a></td><td>MySQL 5.1</td></tr>
<tr><td>index_merge_union=on#</td><td><a href="/kb/en/what-is-mariadb-51/">MariaDB 5.1</a></td><td>MySQL 5.1</td></tr>
<tr><td><a href="/kb/en/non-semi-join-subquery-optimizations/#the-in-to-exists-transformation">in_to_exists=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/block-based-join-algorithms/">join_cache_bka=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/block-based-join-algorithms/">join_cache_hashed=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/block-based-join-algorithms/">join_cache_incremental=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/loosescan-strategy/">loosescan=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>MySQL 5.6</td></tr>
<tr><td>materialization=on (<a href="/kb/en/semi-join-materialization-strategy/">semi-join</a>, <a href="/kb/en/non-semi-join-subquery-optimizations/#materialization-for-non-correlated-in-subqueries">non-semi-join</a>)</td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>MySQL 5.6</td></tr>
<tr><td><a href="/kb/en/multi-range-read-optimization/">mrr=off</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>MySQL 5.6</td></tr>
<tr><td><a href="/kb/en/multi-range-read-optimization/">mrr_cost_based=off</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>MySQL 5.6</td></tr>
<tr><td><a href="/kb/en/multi-range-read-optimization/">mrr_sort_keys=off</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/block-based-join-algorithms/">optimize_join_buffer_size=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a>, Defaults to ON from <a href="/kb/en/mariadb-1043-release-notes/">MariaDB 10.4.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/improvements-to-order-by/">orderby_uses_equalities=on</a></td><td><a href="/kb/en/mariadb-10115-release-notes/">MariaDB 10.1.15</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/block-based-join-algorithms/">outer_join_with_cache=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/non-semi-join-subquery-optimizations/">partial_match_rowid_merge=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/non-semi-join-subquery-optimizations/">partial_match_table_scan=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td>rowid_filter=on</td><td><a href="/kb/en/mariadb-1043-release-notes/">MariaDB 10.4.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/semi-join-subquery-optimizations/">semijoin=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>MySQL 5.6</td></tr>
<tr><td><a href="/kb/en/block-based-join-algorithms/">semijoin_with_cache=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td><a href="https://jira.mariadb.org/browse/MDEV-13369">split_materialized=on</a><sup class="reference" id="_ref-0">[<a href="#_note-0">1</a>]</sup></td><td><a href="/kb/en/mariadb-1034-release-notes/">MariaDB 10.3.4</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/subquery-cache/">subquery_cache=on</a></td><td><a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a></td><td>-</td></tr>
<tr><td><a href="/kb/en/table-elimination-user-interface/">table_elimination=on</a></td><td><a href="/kb/en/what-is-mariadb-51/">MariaDB 5.1</a></td><td>-</td></tr>
</tbody></table>

1 [â†‘](#_ref-0) replaced [split_grouping_derived](https://github.com/MariaDB/server/commit/b14e2b044b), introduced in [MariaDB 10.3.1](/kb/en/mariadb-1031-release-notes/)

### Defaults

<table><tbody><tr><th>From version</th><th>Default optimizer_switch setting</th></tr>
<tr><td><a href="/kb/en/mariadb-1043-release-notes/">MariaDB 10.4.3</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, engine_condition_pushdown=off, index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=<span class="cstm-style" style="color: green;">on</span>, table_elimination=on, extended_keys=on, exists_to_in=on, orderby_uses_equalities=on, condition_pushdown_for_derived=on, split_materialized=on, condition_pushdown_for_subquery=on, <span class="cstm-style" style="color: green;">rowid_filter=on,condition_pushdown_from_having=on</span></td></tr>
<tr><td><a href="/kb/en/mariadb-1040-release-notes/">MariaDB 10.4.0</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, engine_condition_pushdown=off, index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on, extended_keys=on, exists_to_in=on, orderby_uses_equalities=on, condition_pushdown_for_derived=on, split_materialized=on, <span class="cstm-style" style="color: green;">condition_pushdown_for_subquery=on</span></td></tr>
<tr><td><a href="/kb/en/mariadb-1034-release-notes/">MariaDB 10.3.4</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, engine_condition_pushdown=off, index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on, extended_keys=on, exists_to_in=on, orderby_uses_equalities=on, condition_pushdown_for_derived=on, <span class="cstm-style" style="color: green;">split_materialized=on</span></td></tr>
<tr><td><a href="/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, engine_condition_pushdown=off, index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on, extended_keys=on, exists_to_in=on, <span class="cstm-style" style="color: green;">orderby_uses_equalities=on, condition_pushdown_for_derived=on</span></td></tr>
<tr><td><a href="/kb/en/mariadb-10115-release-notes/">MariaDB 10.1.15</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, engine_condition_pushdown=off, index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on, extended_keys=on, exists_to_in=on, <span class="cstm-style" style="color: green;">orderby_uses_equalities=off</span></td></tr>
<tr><td><a href="/kb/en/mariadb-10012-release-notes/">MariaDB 10.0.12</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, engine_condition_pushdown=off, index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on, extended_keys=on, <span class="cstm-style" style="color: green;">exists_to_in=on</span></td></tr>
<tr><td><a href="/kb/en/mariadb-1009-release-notes/">MariaDB 10.0.9</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, engine_condition_pushdown=off, index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on, <span class="cstm-style" style="color: green;">extended_keys=on</span>, exists_to_in=off</td></tr>
<tr><td><a href="/kb/en/mariadb-1002-release-notes/">MariaDB 10.0.2</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, engine_condition_pushdown=off, index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on, extended_keys=off, <span class="cstm-style" style="color: green;">exists_to_in=off</span></td></tr>
<tr><td><a href="/kb/en/mariadb-5521-release-notes/">MariaDB 5.5.21</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, engine_condition_pushdown=off, index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on, <span class="cstm-style" style="color: green;">extended_keys=off</span></td></tr>
<tr><td><a href="/kb/en/mariadb-5520-release-notes/">MariaDB 5.5.20</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, <span class="cstm-style" style="color: green;">engine_condition_pushdown=off</span>, index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on</td></tr>
<tr><td><a href="/kb/en/mariadb-533-release-notes/">MariaDB 5.3.3</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, index_merge_sort_intersection=off, <span class="cstm-style" style="color: green;">index_condition_pushdown=on, derived_merge=on, derived_with_keys=on, firstmatch=on, loosescan=on, materialization=on, in_to_exists=on, semijoin=on</span>, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=on, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=on, semijoin_with_cache=on, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on</td></tr>
<tr><td><a href="/kb/en/mariadb-530-release-notes/">MariaDB 5.3.0</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on, <span class="cstm-style" style="color: green;">index_merge_sort_intersection=off, index_condition_pushdown=off, derived_merge=off, derived_with_keys=off, firstmatch=off, loosescan=off, materialization=off, in_to_exists=on, semijoin=off, partial_match_rowid_merge=on, partial_match_table_scan=on, subquery_cache=off, mrr=off, mrr_cost_based=off, mrr_sort_keys=off, outer_join_with_cache=off, semijoin_with_cache=off, join_cache_incremental=on, join_cache_hashed=on, join_cache_bka=on, optimize_join_buffer_size=off, table_elimination=on</span></td></tr>
<tr><td>&lt; <a href="/kb/en/mariadb-530-release-notes/">MariaDB 5.3.0</a></td><td>index_merge=on, index_merge_union=on, index_merge_sort_union=on, index_merge_intersection=on</td></tr>
</tbody></table>